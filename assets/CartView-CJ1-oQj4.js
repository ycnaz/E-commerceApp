import{C as q,k as I,b as C,j as v,o as i,c as r,a as e,F as k,r as P,B as j,z as w,D as z,t as s,m as b,u as U,l as A,d as F,e as L,E as D}from"./index-DESkFLJa.js";const E={class:"flex flex-col grow"},V=e("h1",{class:"text-4xl font-semibold mb-3"},"Shopping Cart",-1),B={class:"table table-pin-rows rounded-none bg-gray-200"},N=e("thead",{class:"max-md:hidden"},[e("tr",{class:"border-bottom border-black bg-gray-200"},[e("th",null,"Products"),e("th",null,"Price"),e("th",null,"Quantity"),e("th",null,"Total Price")])],-1),Q={key:0,class:"max-md:hidden"},O={class:"p-5"},M={class:"flex gap-x-5 items-center"},R=["onClick"],Y={class:"flex justify-center items-center bg-white size-40 shrink-0 rounded-lg"},G=["src"],H={class:"loading loading-spinner text-rose-500"},J={class:"flex flex-col justify-center"},K={class:"font-semibold underline min-w-max"},W={class:"max-w-96 line-clamp-3 text-xl max-xl:text-sm"},X={class:"font-bold"},Z={class:"font-bold"},ee={class:"flex gap-x-5 items-center"},te=["onClick"],se=e("span",{class:"text-2xl"},"-",-1),oe=[se],ne=["onClick"],le=e("span",{class:"text-2xl"},"+",-1),ce=[le],ae={class:"font-bold"},ie={key:1,class:"hidden max-md:table-row-group"},re={class:"border-black"},de={class:"p-5 max-md:first:w-full"},ue={class:"flex gap-x-5 items-center"},_e=["onClick"],he={class:"flex gap-x-5 items-center max-sm:flex-col max-sm:items-start"},xe={class:"flex justify-center items-center bg-white size-40 shrink-0 rounded-lg max-sm:size-36"},me=["src"],fe={class:"loading loading-spinner text-rose-500"},pe={class:"flex flex-col justify-center"},ve={class:"font-semibold underline min-w-max"},be={class:"max-w-96 line-clamp-3 text-xl max-xl:text-sm"},ge={class:"border-black max-[415px]:hidden"},ye=e("th",{class:"w-1/4 bg-gray-200"},"Price",-1),ke={class:"font-bold text-center"},Ce=e("tr",{class:"bg-gray-200 border-t-black min-[415px]:hidden text-center"},[e("th",null,"Price")],-1),we={class:"font-bold text-center min-[415px]:hidden border-b-black max-[415px]:h-9"},$e={class:"border-black max-[415px]:hidden"},Pe=e("th",{class:"w-1/4 bg-gray-200"},"Quantity",-1),je={class:"font-bold"},ze={class:"flex gap-x-5 items-center"},qe=["onClick"],Ie=e("span",{class:"text-2xl"},"-",-1),Se=[Ie],Te=["onClick"],Ue=e("span",{class:"text-2xl"},"+",-1),Ae=[Ue],Fe=e("tr",{class:"bg-gray-200 border-t-black min-[415px]:hidden text-center"},[e("th",null,"Quantity")],-1),Le={class:"font-bold min-[415px]:hidden border-b-black max-[415px]:h-9"},De={class:"flex gap-x-5 items-center justify-center"},Ee=["onClick"],Ve=e("span",{class:"text-2xl"},"-",-1),Be=[Ve],Ne=["onClick"],Qe=e("span",{class:"text-2xl"},"+",-1),Oe=[Qe],Me={class:"border-black max-[415px]:hidden"},Re=e("th",{class:"w-1/4 bg-gray-200"},"Total Price",-1),Ye={class:"font-bold text-center"},Ge=e("tr",{class:"bg-gray-200 border-t-black min-[415px]:hidden text-center"},[e("th",null,"Total Price")],-1),He={class:"font-bold text-center min-[415px]:hidden border-b-black max-[415px]:h-9"},Je={key:0,class:"flex justify-center items-center grow"},Ke=e("span",{class:"loading loading-spinner text-rose-500 size-32"},null,-1),We=[Ke],Xe={__name:"ProductTable",props:{products:{type:Object,required:!0}},setup($){const d=q(),g=I(),f=$,a=l=>d.userPref?`${(l*d.latest.rates[d.userPref]).toFixed(2)}/${d.userPref}`:`${l.toFixed(2)}/USD`,n=C(()=>f.products),u=v(!0),m=()=>{u.value=!1},x=(l,_)=>{const t=n.value.findIndex(p=>p.product.id===_),c=n.value[t];l==="-"?c.quantity>1?c.quantity-=1:g.warning("Can't reduce further. Please delete the item"):c.quantity+=1};return(l,_)=>(i(),r("section",E,[V,e("table",B,[N,n.value?(i(),r("tbody",Q,[(i(!0),r(k,null,P(n.value,t=>(i(),r("tr",{key:t.product.id,class:"border-black"},[e("td",O,[e("div",M,[e("span",{onClick:c=>l.$emit("removeProduct",t.product.id),class:"text-2xl cursor-pointer"},"×",8,R),e("div",Y,[e("img",{class:j([{"opacity-0 absolute":u.value,"opacity-100":!u.value},"size-32 object-contain shrink-0"]),onLoad:m,loading:"lazy",alt:"Product Image",src:t.product.image},null,42,G),w(e("span",H,null,512),[[z,u.value]])]),e("section",J,[e("span",K,s(t.product.category.charAt(0).toUpperCase()+t.product.category.slice(1)),1),e("h4",W,s(t.product.title),1)])])]),e("td",X,s(a(t.product.price)),1),e("td",Z,[e("div",ee,[e("div",{onClick:c=>x("-",t.product.id),class:"rounded-full size-8 flex justify-center items-center cursor-pointer"},oe,8,te),e("span",null,s(t.quantity),1),e("div",{onClick:c=>x("+",t.product.id),class:"rounded-full size-8 flex justify-center items-center cursor-pointer"},ce,8,ne)])]),e("td",ae,s(a(t.product.price*t.quantity)),1)]))),128))])):b("",!0),n.value?(i(),r("tbody",ie,[(i(!0),r(k,null,P(n.value,t=>(i(),r(k,{key:t.product.id},[e("tr",re,[e("td",de,[e("div",ue,[e("span",{onClick:c=>l.$emit("removeProduct",t.product.id),class:"text-2xl cursor-pointer"},"×",8,_e),e("div",he,[e("div",xe,[e("img",{class:j([{"opacity-0 absolute":u.value,"opacity-100":!u.value},"size-32 object-contain shrink-0"]),onLoad:m,loading:"lazy",alt:"Product Image",src:t.product.image},null,42,me),w(e("span",fe,null,512),[[z,u.value]])]),e("section",pe,[e("span",ve,s(t.product.category.charAt(0).toUpperCase()+t.product.category.slice(1)),1),e("h4",be,s(t.product.title),1)])])])])]),e("tr",ge,[ye,e("td",ke,s(a(t.product.price)),1)]),Ce,e("tr",we,s(a(t.product.price)),1),e("tr",$e,[Pe,e("td",je,[e("div",ze,[e("div",{onClick:c=>x("-",t.product.id),class:"rounded-full size-8 flex justify-center items-center cursor-pointer"},Se,8,qe),e("span",null,s(t.quantity),1),e("div",{onClick:c=>x("+",t.product.id),class:"rounded-full size-8 flex justify-center items-center cursor-pointer"},Ae,8,Te)])])]),Fe,e("tr",Le,[e("div",De,[e("div",{onClick:c=>x("-",t.product.id),class:"rounded-full size-8 flex justify-center items-center cursor-pointer"},Be,8,Ee),e("span",null,s(t.quantity),1),e("div",{onClick:c=>x("+",t.product.id),class:"rounded-full size-8 flex justify-center items-center cursor-pointer"},Oe,8,Ne)])]),e("tr",Me,[Re,e("td",Ye,s(a(t.product.price*t.quantity)),1)]),Ge,e("tr",He,s(a(t.product.price*t.quantity)),1)],64))),128))])):b("",!0)]),n.value.length?b("",!0):(i(),r("div",Je,We))]))}},Ze={class:"h-full flex p-5 gap-x-5 max-lg:flex-col max-lg:gap-y-5"},et={class:"flex flex-col w-96 max-lg:flex-row max-lg:w-full max-lg:h-64 max-sm:flex-col max-sm:w-full max-sm:min-h-min"},tt={class:"flex flex-col h-1/2 max-h-96 items-start justify-between max-lg:h-full max-lg:w-1/2 max-sm:w-full"},st=e("div",null,[e("h2",{class:"text-2xl font-semibold"},"Coupon Code"),e("p",{class:"mt-3"},"Enter your coupon code to get a discount")],-1),ot={class:"w-full"},nt=e("div",{class:"w-full divider max-lg:divider-horizontal max-sm:divider-vertical"},null,-1),lt={class:"flex flex-col h-1/2 max-h-96 bg-amber-300 p-3 rounded-lg max-lg:h-full max-lg:w-1/2 max-sm:w-full"},ct=e("h2",{class:"text-2xl font-semibold mb-3"},"Cart Total",-1),at={class:"flex justify-between"},it=e("span",null,"Items:",-1),rt={class:"text-red-500"},dt={class:"flex justify-between"},ut=e("span",null,"Coupon:",-1),_t={class:"text-emerald-500"},ht={class:"flex justify-between font-semibold text-xl"},xt=e("span",null,"Total:",-1),mt={class:"flex flex-col gap-y-2 mt-auto"},ft=e("button",{class:"w-full bg-white font-bold text-black py-3 rounded-3xl hover:bg-slate-100 transition-all"},"Purchase",-1),vt={__name:"CartView",setup($){const d=q(),g=U(),f=A(),a=I(),n=v([]),u=async()=>{for(const o of f.userCart){const h=g.items.find(y=>y.id===o.productId);h&&n.value.push({product:h,quantity:o.quantity})}},m=C(()=>n.value.map(o=>o.product.price*o.quantity).reduce((o,h)=>o+h,0)),x="Y9s4j23Lq0mA2gE2",l=v(!1),_=v(""),t=C(()=>l.value?m.value*.2:0),c=()=>{_.value.trim()&&(_.value===x?(a.success("Coupon used!"),l.value=!0,_.value=""):a.warning("Coupon is not correct"))},p=o=>d.userPref?`${(o*d.latest.rates[d.userPref]).toFixed(2)}/${d.userPref}`:`${o.toFixed(2)}/USD`,S=()=>{l.value=!1,_.value="",t.value=0,a.success("Coupon removed!")},T=o=>{f.removeFromCart(o),n.value=n.value.filter(h=>h.product.id!=o),a.success("Item removed from your cart")};return F(async()=>{await f.fetchUserId(),await f.fetchCart(),u()}),(o,h)=>(i(),r("div",Ze,[L(Xe,{products:n.value,onRemoveProduct:T},null,8,["products"]),e("div",et,[e("div",tt,[st,e("div",ot,[w(e("input",{"onUpdate:modelValue":h[0]||(h[0]=y=>_.value=y),class:"mb-3 w-full rounded-3xl bg-gray-200 border-none focus:ring-0",type:"text",placeholder:"Coupon Code..."},null,512),[[D,_.value]]),e("button",{onClick:c,class:"w-full bg-black text-white py-3 rounded-3xl hover:ring hover:ring-black hover:ring-offset-2 transition-all"},"Apply")])]),nt,e("section",lt,[ct,e("div",at,[it,e("span",rt,s(p(m.value)),1)]),e("div",dt,[ut,e("span",_t,s(p(t.value)),1)]),e("div",ht,[xt,e("span",null,s(p(l.value?m.value-t.value:m.value)),1)]),e("div",mt,[l.value?(i(),r("button",{key:0,onClick:S,class:"w-full bg-white text-rose-500 py-3 rounded-3xl hover:bg-slate-100 transition-all"},"Remove Coupon")):b("",!0),ft])])])]))}};export{vt as default};
